let lucenUI=(()=>{let o;return{init:function(){this.initSidebar(),this.initTooltips(),this.initTabs(),this.initModals(),this.initDropdownArrows(),this.initCollapsibles(),this.initDropdowns(),this.initSelects(),this.initTablePagination(),this.initCommandBars(),this.initContextualMenu()},initSidebar:function(){let t=document.getElementById("sidebar"),n=document.getElementById("sidebarCollapse"),a=document.querySelector(".lucen-container");n.addEventListener("click",()=>{t.classList.toggle("collapsed"),a.classList.toggle("sidebar-collapsed");var e=n.querySelector("i");e.classList.toggle("bi-chevron-double-left"),e.classList.toggle("bi-chevron-double-right")})},initCollapsibles:function(){document.querySelectorAll(".lucen-nav-item > .lucen-nav-link").forEach(o=>{var e=o.getAttribute("href");if(e&&e.startsWith("#")&&1<e.length){let n=document.querySelector(e),a=o.querySelector(".lucen-nav-arrow");n&&(n.style.height="0px",n.style.overflow="hidden",n.style.transition="height 0.3s ease",o.addEventListener("click",function(e){e.preventDefault();var e=n.classList.contains("show"),t=this.closest(".lucen-nav");t&&t.querySelectorAll(".lucen-nav-submenu").forEach(e=>{e!==n&&(e.classList.remove("show"),e.style.height="0px",e=e.previousElementSibling?.querySelector(".lucen-nav-arrow"))&&e.classList.remove("rotate")}),e?(n.style.height=n.scrollHeight+"px",requestAnimationFrame(()=>{n.style.height="0px"}),n.classList.remove("show"),a&&a.classList.remove("rotate"),o.setAttribute("aria-expanded","false")):(n.classList.add("show"),t=Array.from(n.children).reduce((e,t)=>{var n=window.getComputedStyle(t),a=parseInt(n.marginTop)||0,n=parseInt(n.marginBottom)||0;return e+t.offsetHeight+a+n},0),n.style.height=t+"px",a&&a.classList.add("rotate"),o.setAttribute("aria-expanded","true"))}))}})},initDropdowns:function(){document.querySelectorAll(".lucen-menubar-item").forEach(t=>{t.removeAttribute("onclick"),t.addEventListener("click",e=>{e.target.closest(".lucen-menubar-dropdown-item")||e.target.classList.contains("lucen-menubar-arrow")||this.toggleDropdown(t)});var e=t.querySelector(".lucen-menubar-arrow");e&&e.addEventListener("click",e=>{e.stopPropagation(),this.toggleDropdown(t)})}),document.addEventListener("click",e=>{e.target.closest(".lucen-menubar-item")||this.closeAllDropdowns()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.closeAllDropdowns()})},toggleDropdown:function(e){this.closeAllDropdowns(e),e.classList.toggle("active");var t=e.querySelector(".lucen-menubar-dropdown"),t=(t&&t.classList.toggle("show"),"up"===e.dataset.drop?t.classList.add("dropup"):t.classList.remove("dropup"),e.querySelector(".lucen-menubar-arrow"));t&&t.classList.toggle("rotate")},closeAllDropdowns:function(n){document.querySelectorAll(".lucen-menubar-item").forEach(e=>{var t;n&&e===n||(e.classList.remove("active"),(t=e.querySelector(".lucen-menubar-dropdown"))&&(t.classList.remove("show"),t.classList.remove("dropup")),(t=e.querySelector(".lucen-menubar-arrow"))&&t.classList.remove("rotate"))})},initContextualMenu:function(){let t=document.querySelector(".lucen-contextmenu");t&&(document.addEventListener("contextmenu",e=>{e.preventDefault(),document.querySelectorAll(".lucen-contextmenu.show").forEach(e=>{e.classList.remove("show")}),t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",t.classList.add("show")}),document.addEventListener("click",()=>{t.classList.remove("show")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t.classList.remove("show")}))},initSelects:function(){var e=document.querySelectorAll(".lucen-select");0===e.length?console.warn("No se encontraron elementos .lucen-select"):(e.forEach(a=>{var e=a.querySelector(".lucen-select-trigger"),t=a.querySelector(".lucen-select-dropdown");let o=a.querySelector(".lucen-select-selected");var n=a.querySelectorAll(".lucen-select-option");e&&t&&o&&0!==n.length?(e.addEventListener("click",e=>{e.stopPropagation(),document.querySelectorAll(".lucen-select").forEach(e=>{e!==a&&e.classList.remove("active")}),a.classList.toggle("active")}),n.forEach(n=>{n.addEventListener("click",()=>{var e=n.getAttribute("data-value"),t=n.querySelector("span")?.textContent||"";o.textContent=t,a.classList.remove("active"),a.dispatchEvent(new CustomEvent("change",{detail:{value:e,text:t}}))})})):console.warn("Elementos incompletos en un .lucen-select",a)}),document.addEventListener("click",()=>{document.querySelectorAll(".lucen-select").forEach(e=>{e.classList.remove("active")})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelectorAll(".lucen-select").forEach(e=>{e.classList.remove("active")})}))},initTooltips:function(){document.querySelectorAll("[data-lucen-tooltip]").forEach(e=>{var t=e.getAttribute("data-lucen-tooltip");let n=e.getAttribute("data-lucen-placement")||"top",a=document.createElement("div");a.className="lucen-tooltip",a.textContent=t;t=document.createElement("div");t.className="lucen-tooltip-container",t.setAttribute("data-lucen-placement",n),t.style.position="relative",t.style.display="inline-block",t.appendChild(a),e.parentNode.insertBefore(t,e),t.appendChild(e),a.classList.remove("show"),e.addEventListener("mouseenter",()=>{switch(a.style.top="",a.style.bottom="",a.style.left="",a.style.right="",a.style.marginTop="",a.style.marginBottom="",a.style.marginLeft="",a.style.marginRight="",n){case"top":a.style.bottom="100%",a.style.left="50%",a.style.transform="translateX(-50%)",a.style.marginBottom="8px";break;case"bottom":a.style.top="100%",a.style.left="50%",a.style.transform="translateX(-50%)",a.style.marginTop="8px";break;case"left":a.style.top="50%",a.style.right="100%",a.style.transform="translateY(-50%)",a.style.marginRight="8px";break;case"right":a.style.top="50%",a.style.left="100%",a.style.transform="translateY(-50%)",a.style.marginLeft="8px"}a.classList.add("show")}),e.addEventListener("mouseleave",()=>{a.classList.remove("show")})})},initTabs:function(){document.querySelectorAll(".lucen-tabs-btn").forEach(e=>{e.addEventListener("click",function(){var e=this.getAttribute("data-tab"),t=this.closest(".lucen-tabs");t.querySelectorAll(".lucen-tabs-btn").forEach(e=>{e.classList.remove("active")}),this.classList.add("active"),t.querySelectorAll(".lucen-tabs-pane").forEach(e=>{e.classList.remove("active")}),document.getElementById(e).classList.add("active")})})},initModals:function(){document.querySelectorAll(".lucen-modal").forEach(t=>{t.addEventListener("click",function(e){"static"!==t.getAttribute("data-bs-backdrop")&&e.target===t&&lucenUI.hideModal("#"+t.id)})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(e=document.querySelector(".lucen-modal.show"))&&"false"!==e.getAttribute("data-bs-keyboard")&&lucenUI.hideModal("#"+e.id)}),document.querySelectorAll('[data-bs-toggle="modal"]').forEach(e=>{e.addEventListener("click",function(){var e=this.getAttribute("data-bs-target");lucenUI.showModal(e)})}),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>{e.addEventListener("click",function(){var e=this.closest(".lucen-modal");e&&lucenUI.hideModal("#"+e.id)})})},showModal:function(e){let t=document.querySelector(e);t&&(document.querySelectorAll(".lucen-modal.show").forEach(e=>{e.classList.remove("show")}),t.classList.add("show"),t.style.display="flex",document.body.style.overflow="hidden",t.removeAttribute("aria-hidden"),setTimeout(()=>{var e=t.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e&&e.focus()},100))},hideModal:function(e){var t=document.querySelector(e);t&&(t.classList.remove("show"),document.body.style.overflow="",t.style.display="none",t.setAttribute("aria-hidden","true"),t=document.querySelector(`[data-bs-target="${e}"], [onclick*="${e}"]`))&&t.focus()},showToast:function(e,t=""){var n=document.querySelector(".lucen-toast");n&&n.remove();let a=document.createElement("div");a.className="lucen-toast","success"===t?(a.classList.add("lucen-toast-success"),a.innerHTML=`<i class="bi bi-check-circle"></i><span>${e}</span>`):"error"===t?(a.classList.add("lucen-toast-error"),a.innerHTML=`<i class="bi bi-x-circle"></i><span>${e}</span>`):a.innerHTML=`<i class="bi bi-info-circle"></i><span>${e}</span>`,document.body.appendChild(a),setTimeout(()=>{a.classList.add("show")},10),clearTimeout(o),o=setTimeout(()=>{a.classList.remove("show"),setTimeout(()=>{a.remove()},300)},5e3)},initDropdownArrows:function(){document.querySelectorAll(".dropdown-toggle").forEach(e=>{e.addEventListener("click",function(){var e=this.querySelector(".lucen-nav-arrow");e&&e.classList.toggle("rotate")})})},initCommandBars:function(){document.querySelectorAll(".commandbar-horizontal .lucen-btn, .commandbar-vertical .lucen-btn").forEach(e=>{e.addEventListener("touchstart",function(){this.classList.add("active")}),e.addEventListener("touchend",function(){this.classList.remove("active")})}),document.querySelectorAll(".commandbar-compact .lucen-btn").forEach(e=>{var t;e.hasAttribute("data-lucen-tooltip")||(t=e.querySelector("span"))&&e.setAttribute("data-lucen-tooltip",t.textContent)})},initTablePagination:function(){document.querySelectorAll("[data-lucen-pagination]").forEach(e=>{var t=e.getAttribute("data-lucen-pagination"),t=document.getElementById(t);t&&(e={rowsPerPage:parseInt(e.getAttribute("data-rows-per-page"))||5,maxVisiblePages:parseInt(e.getAttribute("data-max-pages"))||5,showInfo:"false"!==e.getAttribute("data-show-info"),showPrevNext:"false"!==e.getAttribute("data-show-prev-next"),numeric:"true"===e.getAttribute("data-numeric")},this.createPagination(t,e))})},createPagination:function(e,s){var t=e.querySelector("tbody");let a=Array.from(t.querySelectorAll("tr")),c=Math.ceil(a.length/s.rowsPerPage),r=e.parentNode.querySelector(".lucen-pagination"),i=(r||((r=document.createElement("div")).className="lucen-pagination",e.parentNode.appendChild(r)),1),d=e=>{var t=(e-1)*s.rowsPerPage,n=t+s.rowsPerPage;a.forEach(e=>e.style.display="none"),a.slice(t,n).forEach(e=>e.style.display=""),i=e,o()},o=()=>{if(r.innerHTML="",s.showPrevNext&&((e=document.createElement("button")).className="lucen-btn lucen-btn-icon",e.innerHTML='<i class="bi bi-chevron-left"></i>',e.disabled=1===i,e.addEventListener("click",()=>{1<i&&d(i-1)}),r.appendChild(e)),s.showInfo&&!s.numeric&&((e=document.createElement("span")).className="lucen-pagination-info",e.textContent=`Página ${i} de `+c,r.appendChild(e)),s.numeric){var a=document.createElement("div"),e=(a.className="page-numbers",Math.floor(s.maxVisiblePages/2)),o=Math.ceil(s.maxVisiblePages/2)-1;let t=1,n=c;c>s.maxVisiblePages&&(i<=e?n=s.maxVisiblePages:i+o>=c?t=c-s.maxVisiblePages+1:(t=i-e,n=i+o)),1<t&&(e=this.createPageButton(1,i,d),a.appendChild(e),2<t)&&((o=document.createElement("span")).textContent="...",o.style.padding="0 8px",a.appendChild(o));for(let e=t;e<=n;e++){var l=this.createPageButton(e,i,d);a.appendChild(l)}n<c&&(n<c-1&&((e=document.createElement("span")).textContent="...",e.style.padding="0 8px",a.appendChild(e)),o=this.createPageButton(c,i,d),a.appendChild(o)),r.appendChild(a)}s.showPrevNext&&((e=document.createElement("button")).className="lucen-btn lucen-btn-icon",e.innerHTML='<i class="bi bi-chevron-right"></i>',e.disabled=i===c,e.addEventListener("click",()=>{i<c&&d(i+1)}),r.appendChild(e))};d(1)},createPageButton:function(e,t,n){var a=document.createElement("button");return a.className="page-btn "+(e===t?"active":""),a.textContent=e,a.addEventListener("click",()=>n(e)),a}}})();function styeCode(){document.querySelectorAll(".lucen-code-block code").forEach(e=>{var t=formatCode(e.getAttribute("data-code")),t=hljs.highlightAuto(t).value;e.innerHTML=t})}function formatCode(e){if(!e)return"";e=e.split("\n");let t=1/0;return e.forEach(e=>{0!==e.trim().length&&(e=e.match(/^\s*/)[0].length)<t&&(t=e)}),e.map(e=>e.slice(t)).join("\n")}document.addEventListener("DOMContentLoaded",function(){lucenUI.init(),document.querySelectorAll(".lucen-checkbox-touch input").forEach(e=>{e.addEventListener("change",function(){this.checked?this.parentNode.classList.add("checked"):this.parentNode.classList.remove("checked")})})}),window.lucenUI=lucenUI;